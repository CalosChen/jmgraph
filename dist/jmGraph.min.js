"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmUtils=_interopRequireDefault(require("./jmUtils.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var jmEvents=function(){function i(t,e){_classCallCheck(this,i),this.container=t,this.target=e||t,this.mouseHandler=new jmMouseEvent(this,t,e),this.keyHandler=new jmKeyEvent(this,t,e)}return _createClass(i,[{key:"touchStart",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchstart",t),(t.target||t.srcElement)==this.target)return t.preventDefault&&t.preventDefault(),!1}},{key:"touchMove",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchmove",t),(t.target||t.srcElement)==this.target)return t.preventDefault&&t.preventDefault(),!1}},{key:"touchEnd",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchend",t),(t.target||t.srcElement)==this.target)return t.preventDefault&&t.preventDefault(),!1}},{key:"touchCancel",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchcancel",t),(t.target||t.srcElement)==target)return t.preventDefault&&t.preventDefault(),!1}}]),i}(),jmMouseEvent=function(){function n(t,e,i){_classCallCheck(this,n),this.instance=t,this.container=e,this.target=i||e,this.init(t,e,i)}return _createClass(n,[{key:"init",value:function(e,i,t){var n=this.target,r=void 0!==("undefined"==typeof document?"undefined":_typeof(document))?document:null;_jmUtils.default.bindEvent(this.target,"mousedown",function(t){t=t||window.event;i.raiseEvent("mousedown",t)}),r&&_jmUtils.default.bindEvent(r,"mousemove",function(t){if(((t=t||window.event).target||t.srcElement)==n){i.raiseEvent("mousemove",t);return t.preventDefault&&t.preventDefault(),!1}}),_jmUtils.default.bindEvent(this.target,"mouseover",function(t){t=t||window.event,i.raiseEvent("mouseover",t)}),_jmUtils.default.bindEvent(this.target,"mouseleave",function(t){t=t||window.event,i.raiseEvent("mouseleave",t)}),_jmUtils.default.bindEvent(this.target,"mouseout",function(t){t=t||window.event,i.raiseEvent("mouseout",t)}),r&&_jmUtils.default.bindEvent(r,"mouseup",function(t){if(t=t||window.event,!1===i.raiseEvent("mouseup",t))return t.preventDefault&&t.preventDefault(),!1}),_jmUtils.default.bindEvent(this.target,"dblclick",function(t){t=t||window.event,i.raiseEvent("dblclick",t)}),_jmUtils.default.bindEvent(this.target,"click",function(t){t=t||window.event,i.raiseEvent("click",t)}),r&&_jmUtils.default.bindEvent(r,"resize",function(t){return t=t||window.event,i.raiseEvent("resize",t)}),r&&_jmUtils.default.bindEvent(r,"touchstart",function(t){return e.touchStart(t)},{passive:!1}),r&&_jmUtils.default.bindEvent(r,"touchmove",function(t){return e.touchMove(t)},{passive:!1}),r&&_jmUtils.default.bindEvent(r,"touchend",function(t){return e.touchEnd(t)},{passive:!1}),r&&_jmUtils.default.bindEvent(r,"touchcancel",function(t){return e.touchCancel(t)},{passive:!1})}}]),n}(),jmKeyEvent=function(){function n(t,e,i){_classCallCheck(this,n),this.instance=t,this.container=e,this.target=i||e,this.init(e,i)}return _createClass(n,[{key:"checkKeyEvent",value:function(t){var e=t.srcElement||t.target;return!e||"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&"ANCHOR"!=e.tagName&&"FORM"!=e.tagName&&"FILE"!=e.tagName&&"IMG"!=e.tagName&&"HIDDEN"!=e.tagName&&"RADIO"!=e.tagName&&"TEXT"!=e.tagName}},{key:"init",value:function(i,t){var e=void 0!==("undefined"==typeof document?"undefined":_typeof(document))?document:null;e&&_jmUtils.default.bindEvent(e,"keypress",function(t){if(t=t||window.event,checkKeyEvent(t)){var e=i.raiseEvent("keypress",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}}),e&&_jmUtils.default.bindEvent(e,"keydown",function(t){if(t=t||window.event,checkKeyEvent(t)){var e=i.raiseEvent("keydown",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}}),e&&_jmUtils.default.bindEvent(e,"keyup",function(t){if(t=t||window.event,checkKeyEvent(t)){var e=i.raiseEvent("keyup",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}})}}]),n}(),_default=jmEvents;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmList=_interopRequireDefault(require("../models/jmList.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var jmObject=function(){function e(t){_classCallCheck(this,e),t&&"jmGraph"==t.type&&(this.graph=t)}return _createClass(e,[{key:"is",value:function(t){return"string"==typeof t?this.type==t:this instanceof t}},{key:"animate",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(this.is("jmGraph")){if(handle){this.animateHandles||(this.animateHandles=new _jmList.default);var n=[];if(2<e.length)for(var r=2;r<e.length;r++)n.push(e[r]);this.animateHandles.add({millisec:e[0]||20,handle:e[1],params:n})}if(this.animateHandles&&0<this.animateHandles.count()){var o=this;this.dispatcher=setTimeout(function(i){i=i||o;var n=[],r=(new Date).getTime();for(var t in i.animateHandles.each(function(t,e){try{if(e&&e.handle&&(!e.times||r-e.times>=e.millisec))!1===e.handle.apply(i,e.params)&&n.push(e),e.times=r}catch(t){window.console&&window.console.info&&window.console.info(t.toString()),e&&n.push(e)}}),n)i.animateHandles.remove(n[t]);i.animate()},10,this)}}else{var s=this.graph;s&&s.animate.apply(s,arguments)}}}]),e}();_default=jmObject;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmObject2=_interopRequireDefault(require("./jmObject.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jmProperty=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).__properties={},t.__eventHandles={},t}return _inherits(e,t),_createClass(e,[{key:"__pro",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e){var n=e[0];if(1<e.length){var r=e[1],o={oldValue:this.__properties[n],newValue:r};return this.__properties[n]=e[1],this.emit&&this.emit("propertyChange",n,o),e[1]}if(1==e.length)return this.__properties[n]}}},{key:"needUpdate",get:function(){return this.__pro("needUpdate")},set:function(t){this.__pro("needUpdate",t),t&&!this.is("jmGraph")&&this.graph&&(this.graph.needUpdate=!0)}},{key:"graph",get:function(){var t=this.__pro("graph");return t=t||this.__pro("graph",this.findParent("jmGraph"))},set:function(t){return this.__pro("graph",t)}}]),e}(_jmObject2.default);_default=jmProperty;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmUtils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"clone",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(t&&"object"===_typeof(t)){if(this.isType(t,this.list))return new this.list(t);if(Array.isArray(t)){if(e){for(var i=[],n=0;n<t.length;n++)i.push(this.clone(t[n]));return i}return t.slice(0)}var r={};for(var o in r.constructor=t.constructor,t)r[o]=this.clone(t[o]);return r}return t}},{key:"bindEvent",value:function(t,e,i,n){if(!e||!e.indexOf||-1==e.indexOf(" "))return t.attachEvent?t.attachEvent("on"+e,i,n):!!t.addEventListener&&(t.addEventListener(e,i,n),!0);for(var r=e.split(" "),o=0;o<r.length;o++)this.bindEvent(t,r[o],i,n)}},{key:"removeEvent",value:function(t,e,i){return t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?(t.detachEvent("on"+e,i),!0):void(t["on"+e]=null)}},{key:"getElementPosition",value:function(t){var e={top:0,left:0};if(!t)return e;if(t.offsetParent)for(;t.offsetParent;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;else t.x?e.left+=t.x:t.x&&(e.top+=t.y);return e}},{key:"getEventPosition",value:function(t,e){var i=!1,n=(t=t||event).changedTouches||t.targetTouches||t.touches,r=t.target||t.srcElement;n&&((t=n[0]).target||(t.target=r),i=!0);var o=t.pageX||t.x;void 0===o&&(o=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var s=t.pageY||t.y;void 0===s&&(s=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var a=t.offsetX,u=t.offsetY;if(void 0===a&&void 0===u){var l=this.getElementPosition(r);a=o-l.left,u=s-l.top}return e&&(e.x&&(a/=e.x),e.y&&(u/=e.y)),{pageX:o,pageY:s,clientX:t.clientX,clientY:t.clientY,offsetX:a,offsetY:u,layerX:t.layerX,layerY:t.layerY,screenX:t.screenX,screenY:t.screenY,x:a,y:u,isTouch:i}}},{key:"isType",value:function(t,e){return!(!t||"object"!==_typeof(t))&&t.constructor===e}},{key:"pointInPolygon",value:function(t,e,i){i=i||1,i/=2;var n,r,o=e.length,s=!1,a=!0;if(!e||0==o)return 0;if(1==o)return Math.abs(e[0].x-t.x)<=i&&Math.abs(e[0].y-t.y)<=i;if(2==o){if(Math.min(e[0].x,e[1].x)-t.x>i||t.x-Math.max(e[0].x,e[1].x)>i)return 0;if(Math.min(e[0].y,e[1].y)-t.y>i||t.y-Math.max(e[0].y,e[1].y)>i)return 0;if(e[0].x==e[1].x)return Math.abs(e[0].x-t.x)<=i&&(t.y-e[0].y)*(t.y-e[1].y)<=0?1:0;if(e[0].y==e[1].y)return Math.abs(e[0].y-t.y)<=i&&(t.x-e[0].x)*(t.x-e[1].x)<=0?1:0;if(Math.abs(e[0].x-t.x)<i&&Math.abs(e[0].y-t.y)<i)return 1;if(Math.abs(e[1].x-t.x)<i&&Math.abs(e[1].y-t.y)<i)return 1;if(t.y==e[0].y||t.y==e[1].y)return 0;var u=(e[1].x-e[0].x)/(e[1].y-e[0].y)*(t.y-e[0].y),l=(t.y-e[0].y)/Math.sqrt(u*u+(t.y-e[0].y)*(t.y-e[0].y))*(t.x-e[0].x-u);return Math.abs(l)<=i?1:0}for(n=0;n<o;++n)if(e[n].x==t.x&&e[n].y==t.y)return 1;for(t=this.clone(t);a;)for(s=a=!1,n=0,r=o-1;n<o;r=n++)if(e[n].y<t.y&&t.y<e[r].y||e[r].y<t.y&&t.y<e[n].y){if(t.x<=e[n].x||t.x<=e[r].x){var f=(t.y-e[n].y)*(e[r].x-e[n].x)/(e[r].y-e[n].y)+e[n].x;if(t.x<f)s=!s;else if(t.x==f)return 1}}else if(t.y==e[n].y){if(t.x<e[n].x){e[n].y>e[r].y?--t.y:++t.y,a=!0;break}}else if(e[n].y==e[r].y&&t.y==e[n].y&&(e[n].x<t.x&&t.x<e[r].x||e[r].x<t.x&&t.x<e[n].x)){s=!0;break}return s?2:0}},{key:"checkOutSide",value:function(t,e,i){var n={left:0,right:0,top:0,bottom:0};return i.x<0?n.left=e.left+i.x-t.left:0<i.x&&(n.right=e.right+i.x-t.right),i.y<0?n.top=e.top+i.y-t.top:0<i.y&&(n.bottom=e.bottom+i.y-t.bottom),n}},{key:"rotatePoints",value:function(t,e,i){if(!i||!t)return t;var n=Math.cos(i),r=Math.sin(i);if(t.length){for(var o=0;o<t.length;o++)if(t[o]){var s=t[o].x-e.x,a=t[o].y-e.y;t[o].x=s*n-a*r+e.x,t[o].y=s*r+a*n+e.y}}else{var u=t.x-e.x,l=t.y-e.y;t.x=u*n-l*r+e.x,t.y=u*r+l*n+e.y}return t}},{key:"trimStart",value:function(t,e){if(e=e||" ",t&&0<t.length){var i=t[0];if(i===e||0<=e.indexOf(i))return t=t.substring(1),this.trimStart(t,e)}return t}},{key:"trimEnd",value:function(t,e){if(e=e||" ",t&&0<t.length){var i=t[t.length-1];if(i===e||0<=e.indexOf(i))return t=t.substring(0,t.length-1),this.trimStart(t,e)}return t}},{key:"trim",value:function(t,e){return this.trimEnd(this.trimStart(t,e),e)}},{key:"checkPercent",value:function(t){if("string"==typeof t&&"%"==(t=this.trim(t))[t.length-1])return t}},{key:"percentToNumber",value:function(t){if("string"==typeof t){var e=this.checkPercent(t);e&&(t=this.trim(e,"% "),t/=100)}return t}},{key:"hexToNumber",value:function(t){if("string"!=typeof t)return t;for(var e=0,i=(t=t.toLowerCase()).length,n=0;n<i;n++){var r="0123456789abcdef".indexOf(t[n]);if(0!=r){for(var o=1;o<i-n;o++)r*=16;e+=r}}return e}},{key:"numberToHex",value:function(t){for(var e="";0<t;){e="0123456789abcdef"[t%16]+e,t=Math.floor(t/16)}return e}},{key:"toColor",value:function(t,e,i,n){return"string"==typeof t&&t&&"#"==(t=this.trim(t))[0]&&(8<=t.length?(n=t.substr(1,2),e=t.substr(5,2),i=t.substr(7,2),t=t.substr(3,2),n=(this.hexToNumber(n)/255).toFixed(4),t=this.hexToNumber(t||0),e=this.hexToNumber(e||0),i=this.hexToNumber(i||0)):5===t.length&&(n=t.substr(1,1),e=t.substr(3,1),i=t.substr(4,1),t=t.substr(2,1),t=this.hexToNumber(t||0),e=this.hexToNumber(e||0),i=this.hexToNumber(i||0),n=(this.hexToNumber(n)/255).toFixed(4))),void 0!==t&&void 0!==e&&void 0!==i?void 0!==n?"rgba("+t+","+e+","+i+","+n+")":"rgb("+t+","+e+","+i+")":t}}]),t}();_default=jmUtils;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_jmUtils=_interopRequireDefault(require("../common/jmUtils.js")),_jmList=_interopRequireDefault(require("./jmList.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var jmGradient=function(){function i(t){if(_classCallCheck(this,i),this.stops=new _jmList.default,t&&"object"==_typeof(t))for(var e in t)this[e]=t[e];else"string"==typeof t&&this.fromString(t)}return _createClass(i,[{key:"addStop",value:function(t,e){this.stops.add({offset:t,color:e})}},{key:"toGradient",value:function(t){var n,e=t.context||t,i=t.absoluteBounds?t.absoluteBounds:t.getAbsoluteBounds(),r=this.x1||0,o=this.y1||0,s=this.x2,a=this.y2,u=t.getLocation(),l=0;u.radius&&(l=2*u.radius),l||(l=Math.min(u.width,u.height)),_jmUtils.default.checkPercent(r)&&(r=_jmUtils.default.percentToNumber(r)*(u.width||l)),_jmUtils.default.checkPercent(s)&&(s=_jmUtils.default.percentToNumber(s)*(u.width||l)),_jmUtils.default.checkPercent(o)&&(o=_jmUtils.default.percentToNumber(o)*(u.height||l)),_jmUtils.default.checkPercent(a)&&(a=_jmUtils.default.percentToNumber(a)*(u.height||l));var f=Number(r)+i.left,c=Number(o)+i.top,h=Number(s)+i.left,p=Number(a)+i.top;if("linear"===this.type)n=e.createLinearGradient(f,c,h,p);else if("radial"===this.type){var y=this.r1||0,d=this.r2;_jmUtils.default.checkPercent(y)&&(y=_jmUtils.default.percentToNumber(y),y*=l),_jmUtils.default.checkPercent(d)&&(d=_jmUtils.default.percentToNumber(d),d*=l),n=e.createCircularGradient?e.createCircularGradient(f,c,d):e.createRadialGradient(f,c,y,h,p,d)}return this.stops.each(function(t,e){var i=_jmUtils.default.toColor(e.color);n.addColorStop(e.offset,i)}),n}},{key:"fromString",value:function(t){if(t){var e=t.match(/(linear|radial)-gradient\s*\(\s*([^,]+[^\)]+)\)/i);if(e&&!(e.length<3)){this.type=e[1].toLowerCase();var i=e[2].split(",");if(i.length){var n=_jmUtils.default.trim(i[0]).split(/\s+/);if("linear"==this.type?n.length<=2?(this.x2=n[0],this.y2=n[1]||0):(this.x1=n[0],this.y1=n[1],this.x2=n[2],this.y2=n[3]):n.length<=3?(this.x2=n[0],this.y2=n[1]||0,this.r2=n[2]||0):(this.x1=n[0],this.y1=n[1],this.r1=n[2],this.x2=n[3],this.y2=n[3],this.r2=n[3]),1<i.length)for(var r=1;r<i.length;r++){var o=_jmUtils.default.trim(i[r]).split(/\s+/);o.length&&this.addStop(o[1]||0,o[0])}}}}}},{key:"toString",value:function(){var i=this.type+"-gradient(";return"linear"==this.type?i+=this.x1+" "+this.y1+" "+this.x2+" "+this.y2:i+=this.x1+" "+this.y1+" "+this.r1+" "+this.x2+" "+this.y2+" "+this.r2,this.stops.each(function(t,e){i+=","+e.color+" "+e.offset}),i+")"}}]),i}();_default=jmGradient;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var i="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(e,t)})(t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,i){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&_setPrototypeOf(r,i.prototype),r}).apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmList=function(t){function a(){var t;_classCallCheck(this,a);for(var e=[],i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];if(n&&n.length&&Array.isArray(n[0])){for(var o,s=0;s<n[0].length;s++)e.push(n[0][s]);t=_possibleConstructorReturn(this,(o=_getPrototypeOf(a)).call.apply(o,[this].concat(e)))}else t=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this));return t.option={},t.type="jmList",_possibleConstructorReturn(t)}return _inherits(a,t),_createClass(a,[{key:"add",value:function(t){if(t&&Array.isArray(t)){for(var e=0;e<t.length;e++)this.includes(t[e])||this.push(t[e]);return t}return"object"==_typeof(t)&&this.includes(t)||this.push(t),t}},{key:"remove",value:function(t){for(var e=this.length-1;0<=e;e--)this[e]==t&&this.removeAt(e)}},{key:"removeAt",value:function(t){if(this.length>t){var e=this[t];this.splice(t,1),this.option.removeHandler&&this.option.removeHandler.call(this,e,t)}}},{key:"contain",value:function(t){return this.includes(t)}},{key:"get",value:function(t){return"function"==typeof t?this.find(t):this[t]}},{key:"each",value:function(t,e){if(t&&"function"==typeof t)if(e)for(var i=this.length-1;0<=i;i--){if(!1===t.call(this,i,this[i]))break}else for(var n=this.length,r=0;r<n;r++){if(!1===t.call(this,r,this[r]))break}}},{key:"count",value:function(t){if(t&&"function"==typeof t){for(var e=0,i=this.length,n=0;n<i;n++)t(this[n])&&e++;return e}return this.length}},{key:"clear",value:function(){this.splice(0,this.length)}}]),a}(_wrapNativeSuper(Array));_default=jmList;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_jmUtils=_interopRequireDefault(require("../common/jmUtils.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var jmShadow=function(){function r(t,e,i,n){_classCallCheck(this,r),"string"!=typeof t||e||i||n?(this.x=t,this.y=e,this.blur=i,this.color=n):this.fromString(t)}return _createClass(r,[{key:"fromString",value:function(t){if(t){var e=t.match(/\s*([^,]+)\s*,\s*([^,]+)\s*(,[^,]+)?\s*(,[\s\S]+)?\s*/i);return e&&(this.x=e[1]||0,this.y=e[2]||0,e[3]&&(e[3]=_jmUtils.default.trim(e[3],", "),0===e[3].indexOf("#")||/^rgb/i.test(e[3])?this.color=e[3]:this.blur=_jmUtils.default.trim(e[3],", ")),e[4]&&(this.color=_jmUtils.default.trim(e[4],", "))),this}}},{key:"toString",value:function(){var t=this.x+","+this.y;return this.blur&&(t+=","+this.blur),this.color&&(t+=","+this.color),t}}]),r}();_default=jmShadow;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmArc=function(t){function i(t){var e;return _classCallCheck(this,i),t||(t={}),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).center=t.center||{x:0,y:0},e.radius=t.radius||0,e.startAngle=t.start||t.startAngle||0,e.endAngle=t.end||t.endAngle||2*Math.PI,e.anticlockwise=t.anticlockwise||0,e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){var t=this.getLocation(),e=0,i=0,n=t.center.x,r=t.center.y;t.radius?e=i=t.radius:(e=t.width/2,i=t.height/2);var o=this.startAngle,s=this.endAngle;if((0!=e||0!=i)&&o!=s){var a=this.anticlockwise;this.points=[];var u=1/Math.max(e,i);if(a){var l=2*Math.PI;o=l-o,s=l-s}s<o&&(u=-u);for(var f=o;;f+=u){0<u&&s<f?f=s:u<0&&f<s&&(f=s);var c={x:Math.cos(f)*e+n,y:Math.sin(f)*i+r};if(this.points.push(c),f==s)break}return this.points}}},{key:"center",get:function(){return this.__pro("center")},set:function(t){return this.__pro("center",t)}},{key:"radius",get:function(){return this.__pro("radius")},set:function(t){return this.__pro("radius",t)}},{key:"startAngle",get:function(){return this.__pro("startAngle")},set:function(t){return this.__pro("startAngle",t)}},{key:"endAngle",get:function(){return this.__pro("endAngle")},set:function(t){return this.__pro("endAngle",t)}},{key:"anticlockwise",get:function(){return this.__pro("anticlockwise")},set:function(t){return this.__pro("anticlockwise",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmArc;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmArraw=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.lineJoin="miter",e.style.lineCap="square",e.angle=t.angle||0,e.start=t.start||{x:0,y:0},e.end=t.end||{x:0,y:0},e.offsetX=t.offsetX||5,e.offsetY=t.offsetY||8,e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(t){var e=this.angle,i=this.start,n=this.end;if(n){e||(e=Math.atan2(n.y-i.y,n.x-i.x)),this.points=[];var r=this.offsetX,o=this.offsetY,s=Math.atan2(r,o),a=e+s,u=Math.sin(a),l=Math.cos(a),f=Math.sqrt(r*r+o*o),c=u*f,h=l*f,p={x:n.x-h,y:n.y-c},y=e-s;c=(u=Math.sin(y))*f,h=(l=Math.cos(y))*f;var d={x:n.x-h,y:n.y-c},_=jmUtils.clone(n);return _.m=!0,this.points.push(_),this.points.push(p),t||this.style.fill?(this.points.push(d),this.points.push(n)):(this.points.push(_),this.points.push(d)),this.points}}},{key:"start",get:function(){return this.__pro("start")},set:function(t){return this.__pro("start",t)}},{key:"end",get:function(){return this.__pro("end")},set:function(t){return this.__pro("end",t)}},{key:"angle",get:function(){return this.__pro("angle")},set:function(t){return this.__pro("angle",t)}},{key:"offsetX",get:function(){return this.__pro("offsetX")},set:function(t){return this.__pro("offsetX",t)}},{key:"offsetY",get:function(){return this.__pro("offsetY")},set:function(t){return this.__pro("offsetY",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmArraw;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmBezier=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).cpoints=t.points||[],e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){this.points=[];for(var t=this.cpoints,e=0;e<=1;e+=.01){var i=this.getPoint(t,e);this.points.push(i)}return this.points.push(t[t.length-1]),this.points}},{key:"getPoint",value:function(t,e){if(1==t.length)return t[0];if(2==t.length){var i={};return i.x=(t[1].x-t[0].x)*e+t[0].x,i.y=(t[1].y-t[0].y)*e+t[0].y,i}if(2<t.length){for(var n=[],r=0;r<t.length-1;r++){var o=this.getPoint([t[r],t[r+1]],e);o&&n.push(o)}return this.getPoint(n,e)}}},{key:"offset",value:function(t,e,i){var n=this.cpoints;if(n){for(var r=n.length,o=0;o<r;o++)n[o].x+=t,n[o].y+=e;this.emit("move",{offsetX:t,offsetY:e,trans:i}),this.getLocation(!0)}}},{key:"cpoints",get:function(){return this.__pro("cpoints")},set:function(t){return this.__pro("cpoints",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmBezier;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmCircle=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),_createClass(e,[{key:"initPoints",value:function(){var t=this.getLocation();t.radius||(t.radius=Math.min(t.width,t.height)/2),this.points=[],this.points.push({x:t.center.x-t.radius,y:t.center.y-t.radius}),this.points.push({x:t.center.x+t.radius,y:t.center.y-t.radius}),this.points.push({x:t.center.x+t.radius,y:t.center.y+t.radius}),this.points.push({x:t.center.x-t.radius,y:t.center.y+t.radius})}},{key:"draw",value:function(){var t=this.parent&&this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds,e=this.getLocation();e.radius||(e.radius=Math.min(e.width,e.height)/2);var i=this.startAngle,n=this.endAngle,r=this.anticlockwise;this.context.arc(e.center.x+t.left,e.center.y+t.top,e.radius,i,n,r)}}]),e}((_jmArc2=_interopRequireDefault(require("./jmArc.js"))).default);_default=jmCircle;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_jmUtils=_interopRequireDefault(require("../common/jmUtils.js")),_jmList=_interopRequireDefault(require("../models/jmList.js"));var _jmGradient=_interopRequireDefault(require("../models/jmGradient.js")),_jmShadow=_interopRequireDefault(require("../models/jmShadow.js")),_jmProperty2=_interopRequireDefault(require("../common/jmProperty.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _jmArc2,jmStyleMap={fill:"fillStyle",stroke:"strokeStyle","shadow.blur":"shadowBlur","shadow.x":"shadowOffsetX","shadow.y":"shadowOffsetY","shadow.color":"shadowColor",lineWidth:"lineWidth",miterLimit:"miterLimit",fillStyle:"fillStyle",strokeStyle:"strokeStyle",font:"font",opacity:"globalAlpha",textAlign:"textAlign",textBaseline:"textBaseline",shadowBlur:"shadowBlur",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowColor:"shadowColor",lineJoin:"lineJoin",lineCap:"lineCap"},jmControl=function(t){function n(t,e){var i;return _classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this))).__pro("type",e||(this instanceof n?this.constructor:void 0).name),i.style=t&&t.style?t.style:{},i.position=t.position||{x:0,y:0},i.width=t.width||0,i.height=t.height||0,i.initializing(),i.on=i.bind,i}return _inherits(n,t),_createClass(n,[{key:"initializing",value:function(){var e=this;this.children=this.children||new _jmList.default;var i=this.children.add;this.children.add=function(t){if("object"===_typeof(t))return t.parent&&t.parent!=e&&t.parent.children&&t.parent.children.remove(t),t.parent=e,this.contain(t)&&this.oremove(t),i.call(this,t),t.emit("add",t),e.needUpdate=!0,e.graph&&(t.graph=e.graph),this.sort(),t},this.children.oremove=this.children.remove,this.children.remove=function(t){"object"===_typeof(t)&&(t.parent=null,t.graph=null,t.remove(!0),this.oremove(t),e.needUpdate=!0)},this.children.sort=function(){var n={};for(var t in this.each(function(t,e){if(e){var i=e.zIndex;if(!i&&e.style&&e.style.zIndex&&(i=Number(e.style.zIndex),isNaN(i)&&(i=e.style.zIndex||0)),i)(n[i]||(n[i]=[])).push(e)}}),n)i.call(this,n[t]);e.needUpdate=!0},this.children.clear=function(){this.each(function(t,e){this.remove(e)},!0)},this.needUpdate=!0}},{key:"setStyle",value:function(t){var f=this;if(t=t||this.style){var e=function t(e,i,n){if(e){var r=_typeof(e),o=jmStyleMap[n||i];if(e instanceof _jmGradient.default||"string"==r&&-1<e.indexOf("-gradient"))"string"==r&&-1<e.indexOf("-gradient")&&(e=new _jmGradient.default(e)),t(e.toGradient(f),o||i);else if("function"==r)o&&(e=e.call(f,o))&&t(e,o);else if(o)"string"==r&&-1<["fillStyle","strokeStyle","shadowColor"].indexOf(o)&&(e=_jmUtils.default.toColor(e)),f.context[o]=e;else switch(i){case"shadow":if("string"==r){t(new _jmShadow.default(e),i);break}for(var s in e)t(e[s],s,i+"."+s);break;case"translate":f.context.translate(e.x,e.y);break;case"rotation":var a=0,u=0;if(e.point){var l=f.absoluteBounds?f.absoluteBounds:f.getAbsoluteBounds();a=(e=f.getRotation(e)).rotateX+l.left,u=e.rotateY+l.top}0==a&&0==u||f.context.translate(a,u),f.context.rotate(e.angle),0==a&&0==u||f.context.translate(-a,-u);break;case"transform":Array.isArray(e)?f.context.transform.apply(f.context,e):"object"==_typeof(e)&&f.context.transform(e.scaleX,e.skewX,e.skewY,e.scaleY,e.offsetX,e.offsetY);break;case"translate":f.context.translate(e.x,e.y);break;case"cursor":f.cursor=e}}};for(var i in this.translate&&e({translate:this.translate},"translate"),this.transform&&e({transform:this.transform},"transform"),t){var n=_typeof(t[i]);"string"==n&&-1<t[i].indexOf("-gradient")?t[i]=new _jmGradient.default(t[i]):"string"==n&&"shadow"==i&&(t[i]=new _jmShadow.default(t[i])),e(t[i],i)}}}},{key:"getBounds",value:function(t){if(this.bounds&&!t)return this.bounds;var e={};if("jmGraph"==this.type&&this.canvas)"function"==typeof this.canvas.width?e.right=this.canvas.width():this.canvas.width?e.right=this.canvas.width:this.width&&(e.right=this.width),"function"==typeof this.canvas.height?e.bottom=this.canvas.height():this.canvas.height?e.bottom=this.canvas.height:this.height&&(e.bottom=this.height);else if(this.points&&0<this.points.length)for(var i in this.points){var n=this.points[i];(void 0===e.left||e.left>n.x)&&(e.left=n.x),(void 0===e.top||e.top>n.y)&&(e.top=n.y),(void 0===e.right||e.right<n.x)&&(e.right=n.x),(void 0===e.bottom||e.bottom<n.y)&&(e.bottom=n.y)}else if(this.getLocation){var r=this.getLocation();r&&(e.left=r.left,e.top=r.top,e.right=r.left+r.width,e.bottom=r.top+r.height)}return e.left||(e.left=0),e.top||(e.top=0),e.right||(e.right=0),e.bottom||(e.bottom=0),e.width=e.right-e.left,e.height=e.bottom-e.top,this.bounds=e}},{key:"getLocation",value:function(t){var e=this.location={left:0,top:0,width:0,height:0};e.position="function"==typeof this.position?this.position():this.position,e.center=this.center&&"function"==typeof this.center?this.center():this.center,e.start=this.start&&"function"==typeof this.start?this.start():this.start,e.end=this.end&&"function"==typeof this.end?this.end():this.end,e.radius=this.radius,e.width=this.width,e.height=this.height;var i=this.style.margin||{};if(i.left=i.left||0,i.top=i.top||0,i.right=i.right||0,i.bottom=i.bottom||0,e.position?(e.left=e.position.x,e.top=e.position.y):(e.left=i.left,e.top=i.top),!this.parent)return e;var n=this.parent.getBounds();return _jmUtils.default.checkPercent(e.left)&&(e.left=_jmUtils.default.percentToNumber(e.left)*n.width),_jmUtils.default.checkPercent(e.top)&&(e.top=_jmUtils.default.percentToNumber(e.top)*n.height),_jmUtils.default.checkPercent(e.width)&&(e.width=_jmUtils.default.percentToNumber(e.width)*n.width),_jmUtils.default.checkPercent(e.height)&&(e.height=_jmUtils.default.percentToNumber(e.height)*n.height),e.center&&(_jmUtils.default.checkPercent(e.center.x)&&(e.center.x=_jmUtils.default.percentToNumber(e.center.x)*n.width),_jmUtils.default.checkPercent(e.center.y)&&(e.center.y=_jmUtils.default.percentToNumber(e.center.y)*n.height)),e.radius&&_jmUtils.default.checkPercent(e.radius)&&(e.radius=_jmUtils.default.percentToNumber(e.radius)*Math.min(n.width,n.height)),e}},{key:"getRotation",value:function(t){if(t=t||this.style.rotation){var e=this.getBounds();t.rotateX=t.point.x,_jmUtils.default.checkPercent(t.rotateX)&&(t.rotateX=_jmUtils.default.percentToNumber(t.rotateX)*e.width),t.rotateY=t.point.y,_jmUtils.default.checkPercent(t.rotateY)&&(t.rotateY=_jmUtils.default.percentToNumber(t.rotateY)*e.height)}else if(t=this.parent&&this.parent.getRotation?this.parent.getRotation():null){var i=this.getBounds();t.rotateX-=i.left,t.rotateY-=i.top}return t}},{key:"remove",value:function(){this.parent&&this.parent.children.remove(this)}},{key:"offset",value:function(t,e,i,n){i=!1!==i;var r=this.getLocation(!0),o=!1;if(r.position&&(r.left+=t,r.top+=e,r.position.x=r.left,r.position.y=r.top,o=!0),0==o&&r.center&&(r.center.x=r.center.x+t,r.center.y=r.center.y+e,o=!0),r.start&&"object"==_typeof(r.start)&&(r.start.x=r.start.x+t,r.start.y=r.start.y+e,o=!0),r.end&&"object"==_typeof(r.end)&&(r.end.x=r.end.x+t,r.end.y=r.end.y+e,o=!0),0==o&&this.cpoints){var s=(this.cpoints,this.cpoints);if(s){for(var a=s.length,u=0;u<a;u++)s[u].x+=t,s[u].y+=e;o=!0}}if(0==o&&this.points){for(var l=this.points.length,f=0;f<l;f++)this.points[f].x+=t,this.points[f].y+=e;o=!0}this.emit("move",{offsetX:t,offsetY:e,trans:i,evt:n}),this.needUpdate=!0}},{key:"rotate",value:function(t,e){this.style.rotation={angle:t,point:e},this.needUpdate=!0}},{key:"getAbsoluteBounds",value:function(){var t=this.getBounds();if(this.parent&&this.parent.absoluteBounds){var e=this.parent.absoluteBounds||this.parent.getAbsoluteBounds();return{left:e.left+t.left,top:e.top+t.top,right:e.left+t.right,bottom:e.top+t.bottom,width:t.width,height:t.height}}return t}},{key:"beginDraw",value:function(){this.getLocation(!0),this.context.beginPath()}},{key:"endDraw",value:function(){this.style.close&&this.context.closePath(),this.style.fill&&this.context.fill(),!this.style.stroke&&this.style.fill||this.context.stroke(),this.needUpdate=!1}},{key:"draw",value:function(){if(this.points&&0<this.points.length){var t=this.parent&&this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds;this.context.moveTo(this.points[0].x+t.left,this.points[0].y+t.top);for(var e=this.points.length,i=1;i<e;i++){var n=this.points[i];n.m?this.context.moveTo(n.x+t.left,n.y+t.top):this.context.lineTo(n.x+t.left,n.y+t.top)}}}},{key:"paint",value:function(t){if(!1!==t&&!1!==this.visible){this.initPoints&&this.initPoints(),this.bounds=null,this.absoluteBounds=this.getAbsoluteBounds();var e=!0;!this.is("jmGraph")&&this.graph&&(this.absoluteBounds.left>=this.graph.width?e=!1:this.absoluteBounds.top>=this.graph.height?e=!1:this.absoluteBounds.right<=0?e=!1:this.absoluteBounds.bottom<=0&&(e=!1)),this.context.save(),this.setStyle(),this.emit("beginDraw",this),e&&this.beginDraw&&this.beginDraw(),e&&this.draw&&this.draw(),e&&this.endDraw&&this.endDraw(),this.children&&this.children.each(function(t,e){e&&e.paint&&e.paint()}),this.emit("endDraw",this),this.context.restore(),this.is("jmGraph")&&this.context.draw&&this.context.draw(),this.needUpdate=!1}}},{key:"getEvent",value:function(t){return this.__events?this.__events[t]:null}},{key:"bind",value:function(t,e){var i=this.getEvent(t)||function(t,e){return this.__events||(this.__events={}),this.__events[t]=e}.call(this,t,new _jmList.default);i.contain(e)||i.add(e)}},{key:"unbind",value:function(t,e){var i=this.getEvent(t);i&&(e?i.remove(e):i.clear())}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.runEventHandle(e[0],e.slice(1)),this}},{key:"runEventHandle",value:function(t,i){var e=this.getEvent(t);if(e){var n=this;Array.isArray(i)||(i=[i]),e.each(function(t,e){!1===e.apply(n,i)&&(i.cancel=!0)})}return i.cancel}},{key:"checkPoint",value:function(t,e){if("jmGraph"==this.type){var i=this.getPosition();return!(t.pageX>i.right||t.pageX<i.left)&&!(t.pageY>i.bottom||t.pageY<i.top)}var n=this.getBounds(),r=this.getRotation(),o=this.points;if(o&&o.length||((o=[]).push({x:n.left,y:n.top}),o.push({x:n.right,y:n.top}),o.push({x:n.right,y:n.bottom}),o.push({x:n.left,y:n.bottom}),o.push({x:n.left,y:n.top})),e=Number(e||this.style.touchPadding||this.style.lineWidth||1),o&&o.length){if(r&&0!=r.angle&&(o=_jmUtils.default.clone(o,!0),o=_jmUtils.default.rotatePoints(o,{x:r.rotateX+n.left,y:r.rotateY+n.top},r.angle)),2<o.length&&(!this.style.fill||this.style.stroke)){for(var s=0,a=o.length,u=s+1;u<=a;u=++s+1){if(u==a){if(this.style.close)if(_jmUtils.default.pointInPolygon(t,[o[s],o[0]],e))return!0}else if(_jmUtils.default.pointInPolygon(t,[o[s],o[u]],e))return!0}if(!this.style.fill)return!1}return _jmUtils.default.pointInPolygon(t,o,e)}return!(t.x>n.right||t.x<n.left)&&!(t.y>n.bottom||t.y<n.top)}},{key:"raiseEvent",value:function(i,n){if(!1!==this.visible){if(!n.position){var t=this.graph,e=_jmUtils.default.getEventPosition(n,t.scaleSize),r=n.srcElement||n.target;n={position:e,button:0==n.button||e.isTouch?1:n.button,keyCode:n.keyCode||n.charCode||n.which,ctrlKey:n.ctrlKey,cancel:!1,srcElement:r}}n.path=n.path||[],this.children&&this.children.each(function(t,e){!0!==n.cancel&&e.raiseEvent(i,n)},!0);var o=this.parent&&this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds;return!!o&&(n.position.x=n.position.offsetX-o.left,n.position.y=n.position.offsetY-o.top,this.checkPoint(n.position)?(n.target||(n.target=this),n.path.push(this),!0!==n.cancel&&this.runEventHandle(i,n),this.focused||"mousemove"!=i||(this.focused=!0,this.raiseEvent("mouseover",n))):this.focused&&"mousemove"==i&&(this.focused=!1,this.runEventHandle(this,"mouseleave",n)),0==n.cancel)}}},{key:"clearEvents",value:function(t){var e=this.getEvent(t);e&&e.clear}},{key:"findParent",value:function(t){if("string"==typeof t){if(this.type==t)return this}else if(this.is(t))return this;return this.parent?this.parent.findParent(t):null}},{key:"canMove",value:function(t,e){if(!this.__mvMonitor){this.__mvMonitor={},this.__mvMonitor.mouseDown=!1,this.__mvMonitor.curposition={x:0,y:0};var a=this;this.__mvMonitor.mv=function(t){var e=a;if(e.__mvMonitor.mouseDown){e.parent.bounds=null;var i=e.parent.getAbsoluteBounds(),n=t.position.offsetX-e.__mvMonitor.curposition.x,r=t.position.offsetY-e.__mvMonitor.curposition.y;if(e.lockSide){var o=e.bounds||e.getAbsoluteBounds(),s=_jmUtils.default.checkOutSide(i,o,{x:n,y:r});s.left<0?e.lockSide.left&&(n-=s.left):0<s.right&&e.lockSide.right&&(n-=s.right),s.top<0?e.lockSide.top&&(r-=s.top):0<s.bottom&&e.lockSide.bottom&&(r-=s.bottom)}return(n||r)&&(e.offset(n,r,!0,t),e.__mvMonitor.curposition.x=t.position.offsetX,e.__mvMonitor.curposition.y=t.position.offsetY),!1}},this.__mvMonitor.mu=function(t){var e=a;e.__mvMonitor.mouseDown&&(e.__mvMonitor.mouseDown=!1,e.emit("moveend",{position:e.__mvMonitor.curposition}))},this.__mvMonitor.ml=function(){var t=a;if(t.__mvMonitor.mouseDown)return t.__mvMonitor.mouseDown=!1,t.emit("moveend",{position:t.__mvMonitor.curposition}),!1},this.__mvMonitor.md=function(t){if(!this.__mvMonitor.mouseDown&&(0==t.button||1==t.button)){this.__mvMonitor.mouseDown=!0;var e=this.parent.absoluteBounds||this.parent.getAbsoluteBounds();return this.__mvMonitor.curposition.x=t.position.x+e.left,this.__mvMonitor.curposition.y=t.position.y+e.top,this.emit("movestart",{position:this.__mvMonitor.curposition}),!(t.cancel=!0)}}}return e=e||this.graph,!1!==t?(e.bind("mousemove",this.__mvMonitor.mv),e.bind("mouseup",this.__mvMonitor.mu),e.bind("mouseleave",this.__mvMonitor.ml),this.bind("mousedown",this.__mvMonitor.md),e.bind("touchmove",this.__mvMonitor.mv),e.bind("touchend",this.__mvMonitor.mu),this.bind("touchstart",this.__mvMonitor.md)):(e.unbind("mousemove",this.__mvMonitor.mv),e.unbind("mouseup",this.__mvMonitor.mu),e.unbind("mouseleave",this.__mvMonitor.ml),this.unbind("mousedown",this.__mvMonitor.md),e.unbind("touchmove",this.__mvMonitor.mv),e.unbind("touchend",this.__mvMonitor.mu),this.unbind("touchstart",this.__mvMonitor.md)),this}},{key:"type",get:function(){return this.__pro("type")}},{key:"context",get:function(){var t=this.__pro("context");if(t)return t;if(this.is("jmGraph")&&this.canvas)return this.context=this.canvas.getContext("2d");var e=this.graph;return e?e.context:e.canvas.getContext("2d")},set:function(t){return this.__pro("context",t)}},{key:"style",get:function(){var t=this.__pro("style");return t||(t=this.__pro("style",{})),t},set:function(t){return this.__pro("style",t)}},{key:"visible",get:function(){var t=this.__pro("visible");return void 0===t&&(t=this.__pro("visible",!0)),t},set:function(t){return this.__pro("visible",t)}},{key:"children",get:function(){var t=this.__pro("children");return t||(t=this.__pro("children",new _jmList.default)),t},set:function(t){return this.__pro("children",t)}},{key:"position",get:function(){return this.__pro("position")},set:function(t){return this.__pro("position",t)}},{key:"width",get:function(){var t=this.__pro("width");return void 0===t&&(t=this.__pro("width",0)),t},set:function(t){return this.__pro("width",t)}},{key:"height",get:function(){var t=this.__pro("height");return void 0===t&&(t=this.__pro("height",0)),t},set:function(t){return this.__pro("height",t)}},{key:"zIndex",get:function(){var t=this.__pro("zIndex");return t||(t=this.__pro("zIndex",{})),t},set:function(t){return this.__pro("zIndex",t),this.children.sort(),this.needUpdate=!0,t}},{key:"cursor",set:function(t){var e=this.graph;e&&e.css("cursor",t)},get:function(){var t=this.graph;if(t)return t.css("cursor")}}]),n}(_jmProperty2.default);_default=jmControl;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmHArc=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).minRadius=t.minRadius||style.minRadius||0,e.maxRadius=t.maxRadius||style.maxRadius||0,e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){var t=this.getLocation(),e=this.minRadius,i=this.maxRadius,n=this.startAngle,r=this.endAngle;if(this.anticlockwise){var o=2*Math.PI;n=o-n,r=o-r}var s=.1;r<n&&(s=-s);for(var a=[],u=[],l=n;!(0<s&&r<=l)&&!(s<0&&l<=r);l+=s){var f=Math.cos(l),c=Math.sin(l),h={x:f*e+t.center.x,y:c*e+t.center.y},p={x:f*i+t.center.x,y:c*i+t.center.y};a.push(h),u.push(p)}u.reverse(),this.style&&this.style.close||(u[0].m=!0),this.points=a.concat(u)}},{key:"minRadius",get:function(){return this.__pro("minRadius")},set:function(t){return this.__pro("minRadius",t)}},{key:"maxRadius",get:function(){return this.__pro("maxRadius")},set:function(t){return this.__pro("maxRadius",t)}}]),i}((_jmArc2=_interopRequireDefault(require("./jmArc.js"))).default);_default=jmHArc;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmLine=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).start=t.start||{x:0,y:0},e.end=t.end||{x:0,y:0},e.style.lineType=e.style.lineType||"solid",e.style.dashLength=e.style.dashLength||4,e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){var t=this.start,e=this.end;if(this.points=[],this.points.push(t),"dotted"===this.style.lineType){var i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n);i/=r,n/=r;for(var o=!1,s=this.style.dashLength||5,a=s/2,u=s;u<=r;)0==o?(this.points.push({x:t.x+i*u,y:t.y+n*u}),u+=a):(this.points.push({x:t.x+i*u,y:t.y+n*u,m:!0}),u+=s),o=!o}return this.points.push(e),this.points}},{key:"start",get:function(){return this.__pro("start")},set:function(t){return this.__pro("start",t)}},{key:"end",get:function(){return this.__pro("end")},set:function(t){return this.__pro("end",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmLine;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmPath=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).points=t&&t.points?t.points:[],e}return _inherits(i,t),_createClass(i,[{key:"points",get:function(){return this.__pro("points")},set:function(t){return this.__pro("points",t)}}]),i}((_jmControl2=_interopRequireDefault(require("./jmControl.js"))).default);_default=jmPath;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmPath2,jmPrismatic=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.close=void 0===e.style.close||e.style.close,e.center=t.center||{x:0,y:0},e.width=t.width||0,e.height=t.height||0,e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){var t=this.getLocation(),e=t.width/2,i=t.height/2;this.points=[],this.points.push({x:t.center.x-e,y:t.center.y}),this.points.push({x:t.center.x,y:t.center.y+i}),this.points.push({x:t.center.x+e,y:t.center.y}),this.points.push({x:t.center.x,y:t.center.y-i})}},{key:"center",get:function(){return this.__pro("center")},set:function(t){return this.__pro("center",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmPrismatic;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmRect=function(t){function i(t){var e;return _classCallCheck(this,i),t=t||{},(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.close=!0,e.radius=t.radius||e.style.radius||0,e}return _inherits(i,t),_createClass(i,[{key:"getBounds",value:function(){var t={};this.initPoints();var e=this.getLocation();return t.left=e.left,t.top=e.top,t.right=e.left+e.width,t.bottom=e.top+e.height,t.width=t.right-t.left,t.height=t.bottom-t.top,t}},{key:"initPoints",value:function(){var t=this.getLocation(),e={x:t.left,y:t.top},i={x:t.left+t.width,y:t.top},n={x:t.left+t.width,y:t.top+t.height},r={x:t.left,y:t.top+t.height};if("dotted"!==this.style.lineType||this.dottedLine||(this.dottedLine=this.graph.createShape("line",{style:this.style})),t.radius&&t.radius<t.width/2&&t.radius<t.height/2){var o=Math.PI/2,s=this.graph.createShape("arc",{radius:t.radius,anticlockwise:!1});s.center={x:t.left+t.radius,y:t.top+t.radius},s.startAngle=Math.PI,s.endAngle=Math.PI+o;var a=s.initPoints();(s=this.graph.createShape("arc",{radius:t.radius,anticlockwise:!1})).center={x:i.x-t.radius,y:i.y+t.radius},s.startAngle=Math.PI+o,s.endAngle=2*Math.PI;var u=s.initPoints();(s=this.graph.createShape("arc",{radius:t.radius,anticlockwise:!1})).center={x:n.x-t.radius,y:n.y-t.radius},s.startAngle=0,s.endAngle=o;var l=s.initPoints();(s=this.graph.createShape("arc",{radius:t.radius,anticlockwise:!1})).center={x:r.x+t.radius,y:r.y-t.radius},s.startAngle=o,s.endAngle=Math.PI;var f=s.initPoints();this.points=a.concat(u,l,f)}else this.points=[],this.points.push(e),this.dottedLine&&(this.dottedLine.start=e,this.dottedLine.end=i,this.points=this.points.concat(this.dottedLine.initPoints())),this.points.push(i),this.dottedLine&&(this.dottedLine.start=i,this.dottedLine.end=n,this.points=this.points.concat(this.dottedLine.initPoints())),this.points.push(n),this.dottedLine&&(this.dottedLine.start=n,this.dottedLine.end=r,this.points=this.points.concat(this.dottedLine.initPoints())),this.points.push(r),this.dottedLine&&(this.dottedLine.start=r,this.dottedLine.end=e,this.points=this.points.concat(this.dottedLine.initPoints()));return this.points}},{key:"radius",get:function(){return this.__pro("radius")},set:function(t){return this.__pro("radius",t)}}]),i}((_jmPath2=_interopRequireDefault(require("./jmPath.js"))).default);_default=jmRect;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmLine2=_interopRequireDefault(require("../shapes/jmLine.js")),_jmArraw=_interopRequireDefault(require("../shapes/jmArraw.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jmArrawLine=function(t){function i(t){var e;return _classCallCheck(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.lineJoin=e.style.lineJoin||"miter",e.arraw=new _jmArraw.default(t),e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){return this.points=_get(_getPrototypeOf(i.prototype),"initPoints",this).call(this),!1!==this.arrawVisible&&(this.points=this.points.concat(this.arraw.initPoints())),this.points}}]),i}(_jmLine2.default);_default=jmArrawLine;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmImage=function(t){function i(t){var e;return _classCallCheck(this,i),t=t||{},(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.fill=e.fill||"transparent",e.sourceWidth=t.sourceWidth,e.sourceHeight=t.sourceHeight,e.sourcePosition=t.sourcePosition,e.image=t.image||e.style.image,e}return _inherits(i,t),_createClass(i,[{key:"draw",value:function(){try{var t=this.parent&&this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds;t||(t=this.parent&&this.parent.getAbsoluteBounds?this.parent.getAbsoluteBounds():this.getAbsoluteBounds());var e=this.getLocation();e.left+=t.left,e.top+=t.top;var i=this.sourcePosition,n=this.sourceWidth,r=this.sourceHeight,o=this.getImage();i||void 0!==n||void 0!==r?(void 0===n&&(n=e.width||o.width||0),void 0===r&&(r=e.height||o.height||0),i=i||{x:0,y:0},e.width&&e.height?this.context.drawImage(o,i.x,i.y,n,r,e.left,e.top,e.width,e.height):e.width?this.context.drawImage(o,i.x,i.y,n,r,e.left,e.top,e.width,r):e.height?this.context.drawImage(o,i.x,i.y,n,r,e.left,e.top,n,e.height):this.context.drawImage(o,i.x,i.y,n,r,e.left,e.top,n,r)):e?e.width&&e.height?this.context.drawImage(o,e.left,e.top,e.width,e.height):e.width?this.context.drawImage(o,e.left,e.top,e.width,o.height):e.height?this.context.drawImage(o,e.left,e.top,o.width,e.height):this.context.drawImage(o,e.left,e.top):this.context.drawImage(o)}catch(t){console.error&&console.error(t)}}},{key:"getBounds",value:function(){var t={},e=this.getImage(),i=this.getLocation(),n=i.width||e.width,r=i.height||e.height;return t.left=i.left,t.top=i.top,t.right=i.left+n,t.bottom=i.top+r,t.width=n,t.height=r,t}},{key:"getImage",value:function(){var t=this.image||this.style.src||this.style.image;return this.__img&&this.__img.src&&-1!=this.__img.src.indexOf(t)||(t&&t.src?this.__img=t:document&&document.createElement?(this.__img=document.createElement("img"),t&&"string"==typeof t&&(this.__img.src=t)):this.__img=t),this.__img}},{key:"sourcePosition",get:function(){return this.__pro("sourcePosition")},set:function(t){return this.__pro("sourcePosition",t)}},{key:"sourceWidth",get:function(){return this.__pro("sourceWidth")},set:function(t){return this.__pro("sourceWidth",t)}},{key:"sourceHeight",get:function(){return this.__pro("sourceHeight")},set:function(t){return this.__pro("sourceHeight",t)}},{key:"image",get:function(){return this.__pro("image")},set:function(t){return this.__pro("image",t)}}]),i}((_jmControl2=_interopRequireDefault(require("../shapes/jmControl.js"))).default);_default=jmImage;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var jmLabel=function(t){function i(t){var e;return _classCallCheck(this,i),t=t||{},(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).style.font=e.style.font||"15px Arial",e.style.fontFamily=e.style.fontFamily||"Arial",e.style.fontSize=e.style.fontSize||15,e.style.textAlign=e.style.textAlign||"left",e.style.textBaseline=e.style.textBaseline||"middle",e.text=t.text||"",e}return _inherits(i,t),_createClass(i,[{key:"initPoints",value:function(){this.__size=null;var t=this.testSize(),e=this.getLocation(),i=e.width||t.width,n=e.height||t.height;return this.points=[{x:e.left,y:e.top}],this.points.push({x:e.left+i,y:e.top}),this.points.push({x:e.left+i,y:e.top+n}),this.points.push({x:e.left,y:e.top+n}),this.points}},{key:"testSize",value:function(){return this.__size||(this.style.font=this.style.fontSize+"px "+this.style.fontFamily,this.context.save(),this.setStyle(),this.__size=this.context.measureText?this.context.measureText(this.text):{width:15},this.context.restore(),this.__size.height=this.style.fontSize?this.style.fontSize:15,this.width||(this.width=this.__size.width),this.height||(this.height=this.__size.height)),this.__size}},{key:"draw",value:function(){var t=this.parent&&this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds,e=(this.testSize(),this.getLocation()),i=e.left+t.left,n=e.top+t.top;switch(this.style.textAlign){case"right":i+=e.width;break;case"center":i+=e.width/2}switch(this.style.textBaseline){case"bottom":n+=e.height;break;case"hanging":case"alphabetic":case"middle":n+=e.height/2}var r=this.text;r&&(this.style.fill&&this.context.fillText?this.style.maxWidth?this.context.fillText(r,i,n,this.style.maxWidth):this.context.fillText(r,i,n):this.context.strokeText&&(this.style.maxWidth?this.context.strokeText(r,i,n,this.style.maxWidth):this.context.strokeText(r,i,n))),this.style.border&&(this.style.border.style&&(this.context.save(),this.setStyle(this.style.border.style)),this.context.moveTo(this.points[0].x+t.left,this.points[0].y+t.top),this.style.border.top&&this.context.lineTo(this.points[1].x+t.left,this.points[1].y+t.top),this.style.border.right&&(this.context.moveTo(this.points[1].x+t.left,this.points[1].y+t.top),this.context.lineTo(this.points[2].x+t.left,this.points[2].y+t.top)),this.style.border.bottom&&(this.context.moveTo(this.points[2].x+t.left,this.points[2].y+t.top),this.context.lineTo(this.points[3].x+t.left,this.points[3].y+t.top)),this.style.border.left&&(this.context.moveTo(this.points[3].x+t.left,this.points[3].y+t.top),this.context.lineTo(this.points[0].x+t.left,this.points[0].y+t.top)),this.style.border.style&&this.context.restore())}},{key:"text",get:function(){return this.__pro("text")},set:function(t){return this.__pro("text",t)}}]),i}((_jmControl2=_interopRequireDefault(require("../shapes/jmControl.js"))).default);_default=jmLabel;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jmRect2=_interopRequireDefault(require("../shapes/jmRect.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jmResize=function(t){function i(t){var e;return _classCallCheck(this,i),t=t||{},(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t))).enabled=!1!==t.enabled,e.rectSize=t.rectSize||8,e.style.close=e.style.close||!0,e.init(),e}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){if(!1!==this.params.resizable){this.resizeRects=[];var t=this.rectSize,e=this.style.rectStyle||{stroke:"red",fill:"transparent",lineWidth:2,close:!0,zIndex:100};e.close=!0,e.fill=e.fill||"transparent";for(var i=0;i<8;i++){var n=this.graph.createShape("rect",{position:{x:0,y:0},width:t,height:t,style:e});n.index=i,n.visible=!0,this.resizeRects.push(n),this.children.add(n),n.canMove(!0,this.graph)}this.reset(0,0,0,0),this.bindRectEvents()}}},{key:"bindRectEvents",value:function(){for(var t=0;t<this.resizeRects.length;t++){var e=this.resizeRects[t];e.on("move",function(t){var e=0,i=0,n=0,r=0;0==this.index?(n=-t.offsetX,e=t.offsetX):1==this.index?(n=-t.offsetX,e=t.offsetX,r=-t.offsetY,i=t.offsetY):2==this.index?(r=-t.offsetY,i=t.offsetY):3==this.index?(n=t.offsetX,r=-t.offsetY,i=t.offsetY):4==this.index?n=t.offsetX:5==this.index?(n=t.offsetX,r=t.offsetY):6==this.index?r=t.offsetY:7==this.index&&(n=-t.offsetX,n=-t.offsetX,e=t.offsetX,r=t.offsetY),this.parent.reset(e,i,n,r)}),e.bind("mousemove",function(){this.cursor=["w-resize","nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize"][this.index]}),e.bind("mouseleave",function(){this.cursor="default"})}}},{key:"reset",value:function(t,e,i,n){var r=void 0===this.style.minWidth?5:this.style.minWidth,o=void 0===this.style.minHeight?5:this.style.minHeight,s=this.getLocation();if(0!=i||0!=n){var a=s.width+i,u=s.height+n;if(r<=a||o<=u){if(r<=a?this.width=a:i=t=0,o<=u?this.height=u:n=e=0,!1!==this.params.movable&&(t||e)){var l=this.position;l.x=s.left+t,l.y=s.top+e,this.position=l}this.emit("resize",t,e,i,n)}}for(var f in this.resizeRects){var c=this.resizeRects[f];switch(c.index){case 0:c.position.x=-c.width/2,c.position.y=(s.height-c.height)/2;break;case 1:c.position.x=-c.width/2,c.position.y=-c.height/2;break;case 2:c.position.x=(s.width-c.width)/2,c.position.y=-c.height/2;break;case 3:c.position.x=s.width-c.width/2,c.position.y=-c.height/2;break;case 4:c.position.x=s.width-c.width/2,c.position.y=(s.height-c.height)/2;break;case 5:c.position.x=s.width-c.width/2,c.position.y=s.height-c.height/2;break;case 6:c.position.x=(s.width-c.height)/2,c.position.y=s.height-c.height/2;break;case 7:c.position.x=-c.width/2,c.position.y=s.height-c.height/2}}}},{key:"rectSize",get:function(){return this.__pro("rectSize")},set:function(t){return this.__pro("rectSize",t)}}]),i}(_jmRect2.default);_default=jmResize;exports.default=_default,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_jmUtils=_interopRequireDefault(require("./common/jmUtils.js")),_jmShadow=_interopRequireDefault(require("./models/jmShadow.js")),_jmGradient=_interopRequireDefault(require("./models/jmGradient.js"));var _jmEvents=_interopRequireDefault(require("./common/jmEvents.js")),_jmControl2=_interopRequireDefault(require("./shapes/jmControl.js")),_jmPath=_interopRequireDefault(require("./shapes/jmPath.js")),_jmArc=_interopRequireDefault(require("./shapes/jmArc.js")),_jmBezier=(_jmArraw=_interopRequireDefault(require("./shapes/jmArraw.js")),_interopRequireDefault(require("./shapes/jmBezier.js"))),_jmCircle=_interopRequireDefault(require("./shapes/jmCircle.js")),_jmHArc=_interopRequireDefault(require("./shapes/jmHArc.js")),_jmLine=_interopRequireDefault(require("./shapes/jmLine.js")),_jmPrismatic=_interopRequireDefault(require("./shapes/jmPrismatic.js")),_jmRect=_interopRequireDefault(require("./shapes/jmRect.js")),_jmArrawLine=_interopRequireDefault(require("./controls/jmArrawLine.js")),_jmImage=_interopRequireDefault(require("./controls/jmImage.js")),_jmLabel=_interopRequireDefault(require("./controls/jmLabel.js")),_jmResize=_interopRequireDefault(require("./controls/jmResize.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jmGraph=function(t){function s(n,r,o){var t;if(_classCallCheck(this,s),"function"==typeof r&&(o=r,r={}),r=r||{},(this instanceof s?this.constructor:void 0)!==s)return _possibleConstructorReturn(t,new Promise(function(t,e){var i=new s(n,r,o);t&&t(i)}));if((t=_possibleConstructorReturn(this,_getPrototypeOf(s).call(this,r))).option=r||{},t.util=_jmUtils.default,"undefined"!=typeof wx&&wx.createCanvasContext)t.context=wx.createCanvasContext(n),n=wx.createSelectorQuery().select("#"+n);else{if("string"==typeof n&&"undefined"!=typeof document?n=document.getElementById(n):n.length&&(n=n[0]),"CANVAS"!=n.tagName){var e=document.createElement("canvas");n.appendChild(e),e.width=n.offsetWidth||n.clientWidth,e.height=n.offsetHeight||n.clientHeight,n=e}t.context=n.getContext("2d")}return t.canvas=n,t.init(o),t}return _inherits(s,t),_createClass(s,[{key:"init",value:function(t){this.shapes={path:_jmPath.default,arc:_jmArc.default,arraw:_jmArraw.default,bezier:_jmBezier.default,circle:_jmCircle.default,harc:_jmHArc.default,line:_jmLine.default,prismatic:_jmPrismatic.default,rect:_jmRect.default,arrawline:_jmArrawLine.default,image:_jmImage.default,img:_jmImage.default,label:_jmLabel.default,resize:_jmResize.default},this.on("beginDraw",function(){this.context.translate(.5,.5)}),this.on("endDraw",function(){this.context.translate(-.5,-.5)}),0<this.option.width&&(this.width=this.option.width),0<this.option.height&&(this.height=this.option.height),this.eventHandler=new _jmEvents.default(this,this.canvas.canvas||this.canvas),t&&t(this)}},{key:"getPosition",value:function(){var t=_jmUtils.default.getElementPosition(this.canvas.canvas||this.canvas);return t.width=this.canvas.width,t.height=this.canvas.height,t.right=t.left+t.width,t.bottom=t.top+t.height,t}},{key:"registerShape",value:function(t,e){this.shapes[t]=e}},{key:"createShape",value:function(t,e){var i=this.shapes[t];if(i)return e||(e={}),new i(e)}},{key:"createShadow",value:function(t,e,i,n){return new _jmShadow.default(t,e,i,n)}},{key:"createLinearGradient",value:function(t,e,i,n){return new _jmGradient.default({type:"linear",x1:t,y1:e,x2:i,y2:n})}},{key:"createRadialGradient",value:function(t,e,i,n,r,o){return new _jmGradient.default({type:"radial",x1:t,y1:e,r1:i,x2:n,y2:r,r2:o})}},{key:"refresh",value:function(){this.redraw()}},{key:"redraw",value:function(t,e){this.clear(t||this.width,e||this.height),this.paint()}},{key:"clear",value:function(t,e){t&&e?(this.canvas.width=t,this.canvas.height=e,this.scaleSize&&this.context.scale&&this.context.scale(this.scaleSize.x,this.scaleSize.y)):(t=this.canvas.width,e=this.canvas.height,this.scaleSize&&(t/=this.scaleSize.x,e/=this.scaleSize.y)),this.style&&this.style.fill?this.points=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}]:this.context.clearRect&&this.context.clearRect(0,0,t,e)}},{key:"css",value:function(t,e){if(this.canvas)return void 0!==e&&(this.canvas.style[t]=e),this.canvas.style[t]}},{key:"createPath",value:function(t,e){return this.createShape("path",{points:t,style:e})}},{key:"createLine",value:function(t,e,i){return this.createShape("line",{start:t,end:e,style:i})}},{key:"zoomOut",value:function(){this.scale(.9,.9)}},{key:"zoomIn",value:function(){this.scale(1.1,1.1)}},{key:"zoomActual",value:function(){this.scaleSize?this.scale(1/this.scaleSize.x,1/this.scaleSize.y):this.scale(1,1)}},{key:"scale",value:function(t,e){this.normalSize||(this.normalSize={width:this.canvas.width,height:this.canvas.height}),this.context.scale(t,e),this.scaleSize?this.scaleSize={x:t*this.scaleSize.x,y:e*this.scaleSize.y}:this.scaleSize={x:t,y:e},this.refresh()}},{key:"toDataURL",value:function(){return this.canvas.toDataURL?this.canvas.toDataURL():""}},{key:"autoRefresh",value:function(e){var i=this;return function t(){i.needUpdate&&i.redraw(),requestAnimationFrame(t),e&&e()}(),this}},{key:"width",get:function(){return this.canvas?this.canvas.width:0},set:function(t){return this.canvas&&(this.canvas.width=t),t}},{key:"height",get:function(){return this.canvas?this.canvas.height:0},set:function(t){return this.canvas&&(this.canvas.height=t),t}}]),s}(_jmControl2.default);_default=jmGraph;exports.default=_default;